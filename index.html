<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Weather ML</title>
        <style>
            #box {
                background-color: #eff;
                padding: 10px;
                border: 1px solid green;
                border-radius: 4px;
            }
        </style>
    </head>
    <body>
        <div id="box"><p>Received Messages and Replies</p></div>
        <p id="output"></p>

        <script>
            var ws = new WebSocket('wss://'+window.location.hostname+'/ws');

            function screenWrite(data) {
                data = JSON.parse(data);
                document.getElementById('output').innerText = data.join('\r\n');
            }

            ws.onmessage = function(event) {
                screenWrite(event.data);
            };

            ws.onopen = function() {
                ws.send('hello');
            };

            setInterval(function() {
                ws.send('ping');
            }, 1000);
        </script>
    </body>
</html>
